extends admin_layout
block content
    div(id="admin-content")
        p Admin list users
        table
            tr 
                th
                    p= t('admin.list_users.row_no', {lng: i18nextLng})
                th
                    p= t('admin.list_users.edit_data', {lng: i18nextLng})
                th
                    p= t('admin.list_users.modified', {lng: i18nextLng})
            each user, index in users
                tr(class="admin-user-data")
                    td
                        div
                            p= index
                    td
                        div
                            include user_form.pug
                            +user_form("form_edit_"+user["_id"],"",user,"","user_id",user["_id"],t('admin.user_form.submit', {lng: i18nextLng}),i18nextLng)
                        div
                            include admin_delete.pug
                            +admin_delete("form_delete_"+user["_id"],"/admin/user/delete","POST","user_id",user["_id"],t('admin.admin_delete.submit', {lng: i18nextLng}),i18nextLng)
                    td 
                        div
                            p= t('admin.list_users.created_at', {lng: i18nextLng})+": "+ user["created_at"].toLocaleString()
                            p= t('admin.list_users.updated_at', {lng: i18nextLng})+": "+ user["updated_at"].toLocaleString()
                            p= t('admin.list_users.last_login_at', {lng: i18nextLng})+": "+ user["last_login_at"].toLocaleString()

block script_head 
    script(src="/resources/js/admin_list_users.js")